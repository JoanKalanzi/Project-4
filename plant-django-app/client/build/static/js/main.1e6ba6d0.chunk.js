(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,a){},41:function(e,a,s){},68:function(e,a,s){"use strict";s.r(a);var t=s(0),c=s(33),n=s.n(c),l=(s(40),s(41),s(12)),i=s(5),r=s(9),o=s.n(r),j=s(15),d=s(16),m=s(14),b=s(11),u=s(17),h=s.n(u),p=s(70),O=s(1),x=function(){var e=Object(i.f)(),a=Object(t.useState)({username:"",email:"",firstname:"",lastname:"",password:"",password_confirmation:"",profile_image:""}),s=Object(b.a)(a,2),c=s[0],n=s[1],l=Object(t.useState)({username:"",email:"",firstname:"",lastname:"",password:"",password_confirmation:"",profile_image:""}),r=Object(b.a)(l,2),u=r[0],x=r[1],f=function(e){var a=Object(m.a)(Object(m.a)({},c),{},Object(d.a)({},e.target.name,e.target.value));n(a)},v=function(){var a=Object(j.a)(o.a.mark((function a(s){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.preventDefault(),a.prev=1,a.next=4,h.a.post("/api/auth/register/",c);case 4:e.push("/login/"),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(1),console.log("err.response.data",a.t0.response.data),x(a.t0.response.data);case 11:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}();return console.log("hey"),Object(O.jsx)("section",{className:"section",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"columns",children:Object(O.jsxs)("form",{onSubmit:v,className:"column is-half is-offset-one-quarter",children:[Object(O.jsx)("div",{className:"has-text-centered",children:Object(O.jsx)("h1",{className:"is-size-1 title mb-6",children:"PLANTM\ud83c\udf3bM"})}),Object(O.jsxs)("div",{className:"field",children:[Object(O.jsx)("label",{className:"label",children:"Username"}),Object(O.jsx)("div",{className:"control",children:Object(O.jsx)("input",{onChange:f,value:c.username,className:"input",placeholder:"Username",name:"username"})}),u.username&&Object(O.jsx)("p",{className:"help is-danger",children:u.username})]}),Object(O.jsxs)("div",{className:"field",children:[Object(O.jsx)("label",{className:"label",children:"Email"}),Object(O.jsx)("div",{className:"control",children:Object(O.jsx)("input",{onChange:f,value:c.email,className:"input",placeholder:"Email",name:"email"})}),u.email&&Object(O.jsx)("p",{className:"help is-danger",children:u.email})]}),Object(O.jsxs)("div",{className:"field",children:[Object(O.jsx)("label",{className:"label",children:"Firstname"}),Object(O.jsx)("div",{className:"control",children:Object(O.jsx)("input",{onChange:f,value:c.firstname,className:"input",placeholder:"Firstname",name:"firstname"})}),u.firstname&&Object(O.jsx)("p",{className:"help is-danger",children:u.firstname})]}),Object(O.jsxs)("div",{className:"field",children:[Object(O.jsx)("label",{className:"label",children:"Lastname"}),Object(O.jsx)("div",{className:"control",children:Object(O.jsx)("input",{onChange:f,value:c.lastname,className:"input",placeholder:"Lastname",name:"lastname"})}),u.lastname&&Object(O.jsx)("p",{className:"help is-danger",children:u.lastname})]}),Object(O.jsxs)("div",{className:"field",children:[Object(O.jsx)("label",{className:"label",children:"Password"}),Object(O.jsx)("div",{className:"control",children:Object(O.jsx)("input",{type:"password",onChange:f,value:c.password,className:"input",placeholder:"Password",name:"password"})}),u.password&&Object(O.jsx)("p",{className:"help is-danger",children:u.password})]}),Object(O.jsxs)("div",{className:"field",children:[Object(O.jsx)("label",{className:"label",children:"PasswordConfirmation"}),Object(O.jsx)("div",{className:"control",children:Object(O.jsx)("input",{type:"password",onChange:f,value:c.password_confirmation,className:"input",placeholder:"Password confirmation",name:"password_confirmation"})}),u.password_confirmation&&Object(O.jsx)("p",{className:"help is-danger",children:u.password_confirmation})]}),Object(O.jsxs)(p.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(O.jsx)(p.a.Label,{children:"Add profile image file"}),Object(O.jsx)(p.a.Control,{type:"file",onChange:f,value:c.profile_image,className:"input",placeholder:"ProfileImage",name:"profile_image"})]}),u.profile_image&&Object(O.jsx)("p",{className:"help is-danger",children:u.profile_image}),Object(O.jsx)("div",{className:"field",children:Object(O.jsx)("button",{type:"submit",className:"button is-fullwidth is-warning",children:"Register "})})]})})})})},f=s.p+"static/media/plantmom.b9d64c8b.jpeg",v=function(){var e=Object(i.f)(),a=Object(t.useState)({email:"",password:""}),s=Object(b.a)(a,2),c=s[0],n=s[1],r=function(e){var a=Object(m.a)(Object(m.a)({},c),{},Object(d.a)({},e.target.name,e.target.value));n(a)},u=function(){var a=Object(j.a)(o.a.mark((function a(s){var t,l;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.preventDefault(),a.prev=1,a.next=4,h.a.post("/api/auth/login/",c);case 4:t=a.sent,l=t.data,console.log("data.token",l.token),i=l.token,window.localStorage.setItem("token",i),n(l),e.push("/plant_pictures/"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0);case 15:case"end":return a.stop()}var i}),a,null,[[1,12]])})));return function(e){return a.apply(this,arguments)}}();return Object(O.jsx)("section",{className:"section",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{className:"columns is-vcentered",children:[Object(O.jsx)("div",{className:"column is-half",children:Object(O.jsx)("img",{src:f,alt:"plantmom"})}),Object(O.jsxs)("div",{className:"column is-vcentered ",children:[Object(O.jsx)("div",{className:"has-text-centered",children:Object(O.jsx)("h1",{className:"is-size-1 title mb-6",children:"PLANTM\ud83c\udf3bM"})}),Object(O.jsxs)("form",{onSubmit:u,className:"column is-half is-offset-one-quarter",children:[Object(O.jsxs)("div",{className:"field",children:[Object(O.jsx)("label",{className:"label mb-4",children:"Email"}),Object(O.jsx)("div",{className:"control",children:Object(O.jsx)("input",{onChange:r,className:"input",placeholder:"Email",name:"email",value:c.email})})]}),Object(O.jsxs)("div",{className:"field",children:[Object(O.jsx)("label",{className:"label mb-4",children:"Password"}),Object(O.jsx)("div",{className:"control",children:Object(O.jsx)("input",{type:"password",onChange:r,className:"input",placeholder:"Password",name:"password",value:c.password})})]}),Object(O.jsx)("div",{className:"field",children:Object(O.jsx)("button",{type:"submit",className:"button is-fullwidth is-warning mb-4",children:"Login"})}),Object(O.jsx)("hr",{}),Object(O.jsx)("div",{className:"field mb-4"}),Object(O.jsx)("div",{className:"field mb-4",children:Object(O.jsxs)("p",{className:"mb-4",children:[" Do not have an account?",Object(O.jsx)(l.b,{to:"/register/",children:"SignUp"})]})})]})]})]})})})},N=function(){return window.localStorage.getItem("token")},g=function(e){var a=e.id,s=e.title,c=e.image,n=e.owner,i=e.comments;console.log("id----",a);var r=Object(t.useState)({text:"",pictures:"".concat(a)}),u=Object(b.a)(r,2),p=u[0],x=u[1],f=function(){var e=Object(j.a)(o.a.mark((function e(s){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.prev=1,console.log("id----\x3e",a),e.next=5,h.a.post("/api/comments/",p,{headers:{Authorization:"Bearer ".concat(N())}});case 5:x(p),console.log("formData---\x3e",p),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}();return console.log("comments-----\x3e",i),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"column is-one-quarter-desktop is-one-third-tablet",children:[Object(O.jsx)(l.b,{to:"/plant_pictures/".concat(a),children:Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)("div",{className:"card-header",children:Object(O.jsxs)("div",{className:"card-header-title",children:[Object(O.jsx)("figure",{className:"image is-48x48 m-4 ",children:Object(O.jsx)("img",{className:"is-rounded",src:n.profile_image})}),Object(O.jsx)("p",{children:n.username})]})}),Object(O.jsx)("div",{className:"card-image",children:Object(O.jsx)("figure",{className:"image image-is-1by1",children:Object(O.jsx)("img",{src:c,alt:s})})}),Object(O.jsx)("div",{className:"card-content",children:Object(O.jsxs)("p",{children:["Plantname :",s]})}),Object(O.jsxs)("div",{className:"comments",children:[" ",i.map((function(e){return Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"card-content",children:Object(O.jsxs)("h2",{children:[" Comments",Object(O.jsxs)("figure",{className:"image is-48x48 m-4 ",children:[Object(O.jsx)("img",{className:"is-rounded",src:e.owner.profile_image}),Object(O.jsx)("div",{className:"card-content",children:Object(O.jsx)("p",{children:e.text})})]})]})})},e.id)}))]})]})}),Object(O.jsx)("div",{children:function(){var e=function(){var e=N();if(!e)return!1;var a=e.split(".");return console.log("parts",JSON.parse(atob(a[1]))),!(a.length<3)&&JSON.parse(atob(a[1]))}();if(!e)return!1;var a=Math.round(Date.now()/1e3);return console.log("payload----\x3e",e),console.log("now---\x3e",a<e.exp),a<e.exp}()?Object(O.jsx)("form",{onSubmit:f,className:"column is-half is-offset-one-quarter",children:Object(O.jsxs)("div",{className:"field",children:[Object(O.jsx)("label",{className:"label mb-4",children:"Comment"}),Object(O.jsxs)("div",{className:"control",children:[Object(O.jsx)("input",{onChange:function(e){console.log("changing");var a=Object(m.a)(Object(m.a)({},p),{},Object(d.a)({},e.target.name,e.target.value));x(a)},className:"input",placeholder:"Write a comment",name:"text",value:p.text}),Object(O.jsx)("div",{className:"field",children:Object(O.jsx)("button",{type:"submit",className:"button is-fullwidth is-warning",children:"Post"})})]})]})}):Object(O.jsx)("div",{})})]})})},w=function(){var e=Object(t.useState)([]),a=Object(b.a)(e,2),s=a[0],c=a[1],n=Object(t.useState)(!1),l=Object(b.a)(n,2),r=l[0],d=l[1],m=Object(i.f)();return Object(t.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/api/plant_pictures",{headers:{Authorization:"Bearer ".concat(N())}});case 3:a=e.sent,s=a.data,c(s),console.log("data----\x3e",s.id),console.log("data",s),m("/plant_pictures/id"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),d(!0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(O.jsx)("section",{className:"section",children:Object(O.jsx)("div",{className:"container",children:s?Object(O.jsx)("div",{className:"columns is-multiline",children:s.map((function(e){return Object(O.jsx)(g,{owner:e.owner,image:e.image,title:e.title,comments:e.comments,id:e.id},e.id)}))}):Object(O.jsx)("h2",{className:"title has-text-centered",children:r?"Something went wrong \ud83d\ude1e":"...loading \ud83e\uddc0 "})})})},_=function(){var e=Object(i.f)();return Object(O.jsx)("nav",{className:"navbar is-warning ",children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"navbar-brand",children:Object(O.jsx)("div",{className:"title is-dark m-4",children:Object(O.jsx)(l.b,{to:"/plant_pictures",children:"PLANTM\ud83c\udf3bM"})})}),Object(O.jsxs)("div",{className:"navbar-end",children:[Object(O.jsx)("figure",{className:"image is-48x48 m-4 ",children:Object(O.jsx)("img",{className:"is-rounded",src:"https://bulma.io/images/placeholders/128x128.png"})}),Object(O.jsx)("button",{className:"button is-dark m-4",onClick:function(){window.localStorage.removeItem("token"),e.push("/")},children:"Log out"})]})]})})},k=s(35),S=s.n(k),y=function(){return Object(O.jsx)(l.a,{children:Object(O.jsxs)(i.c,{children:[Object(O.jsx)(i.a,{path:"/plant_pictures/:id",children:Object(O.jsx)(S.a,{})}),Object(O.jsxs)(i.a,{path:"/plant_pictures/",children:[Object(O.jsx)(_,{}),Object(O.jsx)(w,{})]}),Object(O.jsx)(i.a,{path:"/register/",children:Object(O.jsx)(x,{})}),Object(O.jsx)(i.a,{path:"/",children:Object(O.jsx)(v,{})})]})})};n.a.render(Object(O.jsx)(y,{}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.1e6ba6d0.chunk.js.map